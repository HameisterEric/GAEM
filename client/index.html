<title> Test </title>
<div id ="signDiv">
	Username: <input id = "signDiv-username" type = "text"></input><br>
	Password: <input id = "signDiv-password" type = "password"></input>
	<button id = "signDiv-signIn">Sign In</button>
	<button id = "signDiv-signUp">Sign Up</button>
</div>

<div id ="gameDiv" style = "display:none;">

	<canvas id = "ctx" width = "500" height="500"> </canvas>
	<div id = "chat-text" style = "width 500px;height:100px;overflow-y:scroll"></div>

	<form id = "chat-form">
		<input id = "chat-input" type = "text" style ="width:500px"> </input>
	</form>
	
</div>
<script src = "https://cdn.socket.io/socket.io-1.4.5.js"></script>
<script>
	var socket = io();
	var signDiv = document.getElementById('signDiv');
	var signDivUsername = document.getElementById('signDiv-username');
	var signDivSignIn = document.getElementById('signDiv-signIn');
	var signDivSignUp = document.getElementById('signDiv-signUp');
	var signDivPassword = document.getElementById('signDiv-password');
	
	signDivSignIn.onclick = function(){
		socket.emit('signIn',{username:signDivUsername.value,password:signDivPassword.value});
	}
	signDivSignUp.onclick = function(){
		socket.emit('signUp',{username:signDivUsername.value,password:signDivPassword.value});
	}
	socket.on('signInResponse',function(data){
		if(data.success){
			signDiv.style.display = 'none';
			gameDiv.style.display = 'inline-block';
		}
		else
			alert("Sign in failed");
	});
	socket.on('signUpResponse',function(data){
		if(data.success){
			alert("Sign up successful");
		}
		else
			alert("Sign up failed");
	});
	var ctx = document.getElementById("ctx").getContext("2d");
	var chatText = document.getElementById('chat-text');
	var chatInput = document.getElementById('chat-input');
	var chatForm = document.getElementById('chat-form');
	ctx.font = "30px Ariel";
		socket.on('newPosition',function(data){
			ctx.clearRect(0,0,500,500);
			for(var i in data){
				if(data[i].being === "player")
					ctx.fillText('P',data[i].x, data[i].y);
				else{
					ctx.fillRect(data[i].x,data[i].y,10,10);
				}
			}
		});
		
		socket.on('addToChat', function(data){
			chatText.innerHTML += '<div>' + data + '</div>';
		});
		
		chatForm.onsubmit = function(e){
			e.preventDefault();
				socket.emit('sendText',chatInput.value);
			chatInput.value = '';
		}
	window.onkeydown = function (e) {
	</script>